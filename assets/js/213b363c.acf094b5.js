"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[697],{8306:(e,t,r)=>{r.d(t,{l$:()=>v,mL:()=>h});var n,o,l=r(7378),i=function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function c(e,t,r,n,o){var l=r>0?Math.max(0,Math.min(r,-t)):Math.min(0,Math.max(r,-t)),i=Math.min(Math.max(e+r-l,n),o)-Math.min(Math.max(e,n),o);return[i,r-i]}function a(e,t,r){return 0===Math.abs(t)&&Math.abs(r)>0||Math.sign(t)===Math.sign(r)?.3*e*Math.sign(r)*Math.log10(1+.5*Math.abs(r)/e):r}function s(e){return!!e&&e.scrollWidth>e.clientWidth}function u(e){return!!e&&e.scrollHeight>e.clientHeight}function p(e){return"function"==typeof e}function f(e,t){var r,n,o=function(){for(var l=[],i=0;i<arguments.length;i++)l[i]=arguments[i];var c=Date.now()-r,a=p(t)?t():t||0;c<a&&c>=0?n=setTimeout((function(){return o.apply(void 0,l)}),a-c):e.apply(void 0,l)},l=function(){for(var e=[],l=0;l<arguments.length;l++)e[l]=arguments[l];r=Date.now(),n=setTimeout((function(){return o.apply(void 0,e)}),p(t)?t():t||0)};return l.clear=function(){clearTimeout(n)},l}function d(e){var t=(0,l.useRef)(e);return(0,l.useEffect)((function(){t.current=e}),[e]),t}(o=n||(n={}))[o.Left=1]="Left",o[o.Middle=4]="Middle",o[o.Right=2]="Right";var m=function(){function e(e,t){var r,n,o,l,i=this;this.getScrollMode=function(e){if(i.getOptions().overscroll&&i.reference.current&&e){var t=i.reference.current,r=t.scrollLeft,n=t.scrollTop,o=t.clientHeight,l=t.clientWidth,c=t.scrollHeight,a=t.scrollWidth;return e.left<0&&r>0||e.left>0&&r<a-l||e.top<0&&n>0||e.top>0&&n<c-o?"local":"global"}return"local"},this.clearStyles=function(){i.reference.current&&i.reference.current.childNodes.forEach((function(e,t){e.style.transition=i.originalStyles.transition[t],e.style.transform=i.originalStyles.transform[t],e.style.pointerEvents=i.originalStyles.pointerEvents[t]})),i.overflow.left=0,i.overflow.top=0,i.overflow.prevent=!1},this.inertia=function(e,t){var r=i.calculateScroll({left:i.inertiaSpeed.left*e,top:i.inertiaSpeed.top*e});i.inertiaSpeed.left=(r.left.local+r.left.overflow)/e*.95,i.inertiaSpeed.top=(r.top.local+r.top.overflow)/e*.95,i.applyScroll(r),Math.abs(i.inertiaSpeed.left)<.05&&Math.abs(i.inertiaSpeed.top)<.05&&(null==t||t())},this.reference=e,this.options=t,this.originalStyles={transform:[],transition:[],pointerEvents:[]},this.overflow={left:0,top:0,prevent:!1},this.inertiaSpeed={left:0,top:0},this.mode=null,this.active=!1,this.loopedInertia=(r=this.inertia,o=!1,l={run:function(e){o=!1;var t=performance.now(),i=function(){l.cancel(),null==e||e()},c=function(e){o||(r(e-t,i),t=e,n=window.requestAnimationFrame((function(e){return c(e)})))};n=window.requestAnimationFrame((function(e){return c(e)}))},cancel:function(){o=!0,window.cancelAnimationFrame(n)}}),this.debouncedClearStyles=f(this.clearStyles,300)}return e.prototype.getOptions=function(){return i({inertia:!0,rubberBand:!0},this.options.current)},e.prototype.start=function(e){var t=this;this.active&&this.cancel(),this.mode=this.getScrollMode(e),this.reference.current&&this.reference.current.childNodes.forEach((function(e){e.addEventListener("click",t.preventEvent);var r=window.getComputedStyle(e),n=r.transform,o=r.transition,l=r.pointerEvents;t.originalStyles.transition.push(o),t.originalStyles.transform.push(n),t.originalStyles.pointerEvents.push(l),e.style.pointerEvents="none"})),this.active=!0},e.prototype.scroll=function(e){this.applyScroll(this.calculateScroll(e))},e.prototype.end=function(e,t){var r=this,n=this.getOptions().inertia,o=function(){r.cancel(),null==t||t()};this.inertiaSpeed.left=e?e.left:0,this.inertiaSpeed.top=e?e.top:0,n?this.loopedInertia.run(o):o()},e.prototype.cancel=function(){var e,t=this;null===(e=this.reference.current)||void 0===e||e.childNodes.forEach((function(e){e.removeEventListener("click",t.preventEvent)})),this.resetOverflow(),this.loopedInertia.cancel(),this.mode=null,this.active=!1},e.prototype.resetOverflow=function(){var e,t=this.overflow.left||this.overflow.top;t&&(this.overflow.prevent=!0,(null===(e=this.reference.current)||void 0===e?void 0:e.childNodes).forEach((function(e){e.style.transform="translate3d(0px, 0px, 0px)",e.style.transition="300ms"}))),t?this.debouncedClearStyles():this.clearStyles()},e.prototype.preventEvent=function(e){e.preventDefault(),e.stopImmediatePropagation()},e.prototype.applyScroll=function(e){var t=this,r=e.left,n=e.top;(r.global||n.global)&&window.scrollTo({left:window.scrollX+r.global,top:window.scrollY+n.global,behavior:"auto"}),this.reference.current&&(this.reference.current.scrollLeft+=r.local,this.reference.current.scrollTop+=n.local,this.overflow.prevent||!r.overflow&&!n.overflow||(this.overflow.left+=r.overflow,this.overflow.top+=n.overflow,this.reference.current.childNodes.forEach((function(e){e.style.transform="translate3d("+-t.overflow.left+"px, "+-t.overflow.top+"px, 0px)",e.style.transition="0ms"}))))},e.prototype.calculateScroll=function(e){var t=this.getOptions().rubberBand,r={local:0,global:0,overflow:0},n={local:0,global:0,overflow:0};if("global"===this.mode)r.global=e.left,n.global=e.top;else if(this.reference.current){var o=this.reference.current,l=o.scrollLeft,i=o.scrollTop,p=o.scrollWidth,f=o.clientWidth,d=o.scrollHeight,m=o.clientHeight;if(s(this.reference.current)){var h=c(l,this.overflow.left,e.left,0,p-f),v=h[0],w=h[1];r.local=v,t&&(r.overflow=a(f,this.overflow.left,w))}if(u(this.reference.current)){var y=c(i,this.overflow.top,e.top,0,d-m);v=y[0],w=y[1],n.local=v,t&&(n.overflow=a(f,this.overflow.top,w))}}return{left:r,top:n}},e}();function h(e){void 0===e&&(e={mouseScroll:!0});var t,r,o,c=(0,l.useRef)(null),a=1/60*1e3,p=(0,l.useRef)({scrolling:!1,started:!1,pressed:!1,artificial:!1,mouse:!1}),h=(0,l.useRef)({active:{left:!1,top:!1},initialClick:{left:0,top:0},speedX:0,speedY:0,clientX:0,clientY:0}),v=(0,l.useRef)({body:{},reference:{}}),w=d(e),y=d(i({activationDistance:20,cursor:!0,buttons:[n.Left]},null!==(t=w.current.mouseScroll)&&"object"==typeof t?w.current.mouseScroll:{})),g=(0,l.useState)("mouseScrollImplementation"in e&&e.mouseScrollImplementation?e.mouseScrollImplementation(c,y):function(e,t){return new m(e,t)}(c,y))[0],b=function(){var e=function(){window.requestAnimationFrame((function(){var e,t;null===(t=(e=w.current).onEndScroll)||void 0===t||t.call(e),p.current.started=!1,p.current.scrolling=!1,p.current.artificial=!1}))};p.current.artificial?g.end({left:h.current.speedX,top:h.current.speedY},e):e()},S=function(e){var t,r,n=y.current.ignoreElements;w.current.mouseScroll&&function(e,t,r){if(r&&e&&t){var n=e.closest(r);return null===n||n.contains(t)}return Boolean(e&&t)}(e.target,c.current,n)&&(s(c.current)||u(c.current))&&-1!==y.current.buttons.indexOf(e.buttons)&&(t=e.clientX,r=e.clientY,h.current.speedY=0,h.current.speedX=0,h.current.clientX=t,h.current.clientY=r,h.current.active.left=!1,h.current.active.top=!1,h.current.initialClick.top=r,h.current.initialClick.left=t,p.current.mouse=!0,p.current.pressed=!0,g.cancel())},E=function(e){w.current.mouseScroll&&p.current.pressed&&p.current.mouse&&(function(e,t){var r=y.current,n=r.activationDistance,o=r.cursor;Math.abs(e-h.current.initialClick.left)>n&&(h.current.active.left=!0),Math.abs(t-h.current.initialClick.top)>n&&(h.current.active.top=!0);var l={left:h.current.active.left?h.current.clientX-e:0,top:h.current.active.top?h.current.clientY-t:0};g.active?p.current.pressed&&(h.current.speedX=l.left/a,h.current.speedY=l.top/a,h.current.clientX=e,h.current.clientY=t,g.scroll(l),window.requestAnimationFrame((function(){h.current.speedX=0,h.current.speedY=0}))):(h.current.active.top||h.current.active.left)&&(g.start(l),h.current.clientX=e,h.current.clientY=t,p.current.artificial=!0,o&&(v.current.body.cursor=document.body.style.cursor,document.body.style.cursor="grabbing",c.current&&(v.current.reference.cursor=c.current.style.cursor,c.current.style.cursor="grabbing")))}(e.clientX,e.clientY),e.preventDefault(),e.stopPropagation())},k=function(){p.current.pressed&&(g.active&&b(),p.current.pressed=!1,p.current.mouse=!1,x())},x=function(){y.current.cursor&&(document.body.style.cursor=v.current.body.cursor||"",c.current&&(c.current.style.cursor=v.current.reference.cursor||""))},N=function(){p.current.artificial=!1,p.current.pressed=!0},C=function(){p.current.pressed&&(p.current.started&&!p.current.scrolling&&b(),p.current.pressed=!1)},M=function(){var e,t;p.current.scrolling=!0,p.current.started?null===(t=(e=w.current).onScroll)||void 0===t||t.call(e):function(){var e,t;p.current.started=!0,null===(t=(e=w.current).onStartScroll)||void 0===t||t.call(e)}(),I()},I=(250,r=d((function(){var e=p.current,t=e.pressed,r=e.started,n=e.artificial;t||!r||n||b(),p.current.scrolling=!1})),o=d(250),(0,l.useRef)(f((function(){var e;null===(e=r.current)||void 0===e||e.call(r)}),(function(){return o.current}))).current),L=(0,l.useCallback)((function(e){c.current!==e&&(c.current&&(c.current.removeEventListener("mousedown",S),c.current.removeEventListener("scroll",M),c.current.removeEventListener("touchstart",N)),c.current=e,c.current&&(c.current.addEventListener("mousedown",S,{passive:!1}),c.current.addEventListener("scroll",M,{passive:!1}),c.current.addEventListener("touchstart",N)))}),[]);return(0,l.useEffect)((function(){return window.addEventListener("mouseup",k),window.addEventListener("mousemove",E),window.addEventListener("touchend",C),function(){window.removeEventListener("mouseup",k),window.removeEventListener("mousemove",E),window.removeEventListener("touchend",C),x()}}),[]),{ref:L}}var v=(0,l.forwardRef)((function(e,t){var r,n,o=i({mouseScrollImplementation:void 0},e),c=o.children,a=o.className,s=o.component,u=o.hideScrollbars,p=void 0===u||u,f=o.mouseScroll,d=void 0===f||f,m=o.mouseScrollImplementation,v=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(o,["children","className","component","hideScrollbars","mouseScroll","mouseScrollImplementation"]),w=s||"div",y=h({mouseScroll:d,mouseScrollImplementation:m});return l.createElement(w,i({className:(n=[a,"indiana-scroll-container",p&&"indiana-scroll-container--hide-scrollbars"],n.filter((function(e){return e})).join(" ")),ref:(r=[t,y.ref],function(e){r.forEach((function(t){"function"==typeof t?t(e):null!=t&&(t.current=e)}))})},v),c)}))},5908:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>k,contentTitle:()=>S,default:()=>C,frontMatter:()=>b,metadata:()=>E,toc:()=>x});var n=r(7462),o=r(7378),l=r(3905),i=r(8306);const c="root_rsm_",a="element_ursH",s=()=>{const e=Array(32).fill(0).map(((e,t)=>t));return o.createElement("div",{className:c},e.map((e=>o.createElement("div",{key:e,className:a},e+1))))},u="root_eGxN",p=e=>{let{children:t}=e;return o.createElement("div",{className:u},t)},f=()=>{const e=(0,o.useRef)(null);return(0,o.useEffect)((()=>{e.current&&e.current.scrollTo({left:e.current.scrollWidth/2-e.current.clientWidth/2})}),[]),o.createElement(p,null,o.createElement(i.l$,{ref:e},o.createElement(s,null)))},d="wrapper_JyBT",m="input_sFcB",h="container_tIBt",v=()=>{const e=Array(32).fill(0);return o.createElement(p,null,o.createElement(i.l$,{className:h,mouseScroll:{ignoreElements:"input"}},e.map(((e,t)=>o.createElement("div",{key:t,className:d},o.createElement("input",{className:m}))))))};var w=r(77);const y="container_CMbY",g=()=>{const{ref:e}=(0,i.mL)();return o.createElement(p,null,o.createElement(w.Z,{className:y,scrollableNodeProps:{ref:e}},o.createElement(s,null)))},b={sidebar_position:2},S="Recipes",E={unversionedId:"recipes",id:"recipes",title:"Recipes",description:"Initial Scroll",source:"@site/docs/recipes.mdx",sourceDirName:".",slug:"/recipes",permalink:"/react-indiana-drag-scroll/docs/recipes",draft:!1,editUrl:"https://github.com/Norserium/react-indiana-drag-scroll/tree/next/src/example/docs/recipes.mdx",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Intro",permalink:"/react-indiana-drag-scroll/docs/intro"},next:{title:"Migration",permalink:"/react-indiana-drag-scroll/docs/migration"}},k={},x=[{value:"Initial Scroll",id:"initial-scroll",level:2},{value:"Inputs",id:"inputs",level:2},{value:"Deep Ref",id:"deep-ref",level:2}],N={toc:x};function C(e){let{components:t,...r}=e;return(0,l.kt)("wrapper",(0,n.Z)({},N,r,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"recipes"},"Recipes"),(0,l.kt)("h2",{id:"initial-scroll"},"Initial Scroll"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},"ScrollContainer")," uses ",(0,l.kt)("inlineCode",{parentName:"p"},"forwardRef")," under the hood to set the passed ref to the root element. It is ",(0,l.kt)("inlineCode",{parentName:"p"},"div")," block by default.\nTherefore to set the initial scroll you should just pass the ref and use it to scroll the container."),(0,l.kt)(f,{mdxType:"InitialScrollExample"}),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-tsx"},"export const InitialScrollExample = () => {\n    const ref = useRef<HTMLElement>(null);\n\n    useEffect(() => {\n        ref.current?.scrollTo({\n            left: 1600,\n        });\n    }, []);\n\n    return (\n            <ScrollContainer ref={ref}>\n                {/* Content */}\n            </ScrollContainer>\n    );\n};\n")),(0,l.kt)("h2",{id:"inputs"},"Inputs"),(0,l.kt)("p",null,"If the container contains ",(0,l.kt)("inlineCode",{parentName:"p"},"<input/>"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"<textarea/>"),", etc, user will lose the possibility to select the text inside them, because\nthe cursor will be intercepted by the container."),(0,l.kt)("p",null,"To bypass this limitation you can ignore specific element by their selector:"),(0,l.kt)(v,{mdxType:"InputExample"}),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-tsx"},"export const InputExample: FC = () => {\n    return (\n        <ScrollContainer mouseScroll={{ ignoreElements: 'input' }}>\n            {/* Content */}\n        </ScrollContainer>\n    );\n};\n")),(0,l.kt)("h2",{id:"deep-ref"},"Deep Ref"),(0,l.kt)("p",null,"There are situations, when you need to add the scroll by mouse dragging to a container\nthat is inside some other component."),(0,l.kt)("p",null,"There is the idea how to implement it with ",(0,l.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/simplebar-react"},(0,l.kt)("inlineCode",{parentName:"a"},"simplebar-react")),":"),(0,l.kt)(g,{mdxType:"DeepRefExample"}),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-tsx"},"import React, { FC } from 'react';\nimport { useScrollContainer } from 'react-indiana-drag-scroll';\nimport SimpleBar from 'simplebar-react';\nimport 'simplebar-react/dist/simplebar.min.css';\n\nexport const DeepRefExample: FC = () => {\n    const { ref } = useScrollContainer();\n\n    return (\n        <SimpleBar scrollableNodeProps={{ ref }}>\n            {/* Content */}\n        </SimpleBar>\n    );\n};\n")))}C.isMDXComponent=!0}}]);